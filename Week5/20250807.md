# 🍎 당일 태스크 공유

- `백승진`
    - 정적이고 타입 안전한 쿼리 작성을 위해 **Querydsl**을 설정했습니다. 앞으로 복잡한 쿼리도 더 깔끔하고 안전하게 다룰 수 있게 됐습니다.
    - 테스트 환경의 독립성과 신뢰성 확보를 위해 **TestContainer**를 적용했습니다. 이제 실제 운영 환경과 동일한 환경에서 테스트할 수 있습니다.
    - 기존 **JdbcTemplate**로 작성된 예보 조회 쿼리를 **QueryDsl**로 변경했습니다. 덕분에 쿼리 가독성이 높아지고 유지보수가 훨씬 쉬워졌습니다.
    - 단기 예보 디테일 테이블을 기존 예보 테이블에 다시 통합했습니다.
---

# 🍏 다음날 태스크 공유
- `백승진`
    - 예보 값에 따라 산악 멘트를 추천해주는 유틸 클래스를 Common-module내에 구현
---

# ☀️ 어려웠던 점
- `백승진`
    - 처음 **Querydsl** 설정을 할 때, **QClass** 생성을 위한 Gradle 설정을 **각 도메인 모듈**에 따로 해야 할지, 아니면 **루트 모듈**에만 해도 되는지 불분명했습니다. 각 모듈 내의 엔티티들이 서로 독립적이라 각각 설정해야 할 것으로 생각했습니다. 다양한 테스트와 시도를 거친 결과, **루트 모듈의 `build.gradle` 파일에 Querydsl 설정을 한 번만 추가해도 모든 하위 도메인 모듈의 엔티티에 대한 QClass가 정상적으로 생성**된다는 것을 확인했습니다.
    - **Querydsl**로 쿼리를 작성할 때 **MySQL 내장 함수**를 사용해야 했습니다. 그런데 테스트 환경에서는 **H2 인메모리 데이터베이스**를 사용하고 있어, H2가 MySQL 함수를 인식하지 못해 에러가 발생했습니다. 처음에는 쿼리 자체에 문제가 있는 줄 알고 한참 헤맸습니다.
        
        문제가 **데이터베이스 호환성** 때문이라는 것을 파악한 후, **TestContainer**를 이용해 테스트 시 **실제 MySQL 컨테이너**를 띄우기로 결정했습니다. 하지만 이 과정에서도 여러 어려움이 있었습니다.
        
        - **TestContainer 설정**: MySQL 컨테이너를 띄우기 위한 설정이 생각보다 복잡해 애를 먹었습니다.
        - **컨테이너 중복 생성**: 각 모듈마다 테스트가 실행될 때마다 JVM이 새로 뜨면서 **MySQL 컨테이너도 계속 새로 생성**되는 문제가 발생했습니다.
        
        현재 MySQL 컨테이너가 계속 새로 뜨는 문제는 아직 해결하지 못했습니다. 추후 **TestContainer의 라이프사이클 관리**나 **단일 컨테이너 공유** 방안에 대해 더 고민해봐야 할 것 같습니다.
---

# ☁️ 개선할 점
- `백승진`
    - 초기에 설정을 할 때 **H2 인메모리 데이터베이스**와 **MySQL**의 호환성 문제를 미리 고려했더라면, 나중에 테스트 환경을 변경하는 데 드는 시간을 절약할 수 있었을 것입니다. H2에 맞춰 세팅하는 데도 많은 시간을 썼는데, 결국 MySQL로 다시 바꾸면서 이 시간이 낭비된 점이 아쉬움으로 남습니다. 앞으로는 프로젝트 초기에 사용할 기술 스택과 테스트 환경을 더 신중하게 결정하고, 그에 따른 잠재적인 문제를 미리 파악하는 것이 중요하다고 생각합니다.
    - 종합 프로젝트를 진행할 시간이 **한 달**로 정해져 있는데, 아예 처음 해보는 멀티 모듈 구조를 선택하면서 초기 세팅에 너무 많은 시간을 쏟게 되었습니다. 다음에는 이와 같은 **트레이드오프**를 더 신중하게 고려해야겠습니다. 시간과 경험이 제한적이라면, 안정적이고 익숙한 구조를 선택해서 핵심 기능 개발에 집중하는 것이 더 현명한 판단일 수 있습니다. 초기부터 프로젝트의 전체적인 시간과 목표를 고려하여 구조를 결정하는 것이 중요하다는 것을 깨달았습니다.
    - 아직 emotion에 대한 이해가 부족한 것이 느껴졌다. 만약 동적으로 어떤 값에 대하여 들어오게 되면 함수 안에서 처리를 해야되는데 미리 정의된 css들과 받아서 동적으로 처리해야하는 css를 동시에 다룰 수 있는 방법을 몰라 gpt에게 질문을 해서 알아냈다. 문자열로 전달되는거 같아 막연히 가능할거 같은데?? 라는 생각은 있었지만 이렇게 적용을 해보는 것이 중요한것 같다는 생각을 했다.
---
